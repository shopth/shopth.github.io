/*!
 * QRCDR setup
 */
function printIt(e){var a=$(e).find("img").attr("src"),t=window.open("about:blank","_new");t.document.open(),t.document.write('<html><head></head><body onload="window.print()" onafterprint="window.close()"><img src="'+a+'"/></body></html>'),t.document.close()}function initializeMap(){if($("#map-canvas").length){var e,a,t,o=new google.maps.LatLng(40.7127837,-74.00594130000002),n=document.getElementById("pac-input"),l=document.getElementById("latlong"),r=document.getElementById("latbox"),s=document.getElementById("lngbox"),i={zoom:10,center:o};a=new google.maps.Map(document.getElementById("map-canvas"),i),t=new google.maps.places.SearchBox(n),e=new google.maps.Marker({map:a,draggable:!0,animation:google.maps.Animation.DROP,position:o}),google.maps.event.addListener(e,"dragend",function(a){e.getPosition().lat(),e.getPosition().lng();p()}),a.controls[google.maps.ControlPosition.TOP_LEFT].push(l),r.value.length>0&&s.value.length>0&&(c=Number(r.value),d=Number(s.value),a.setCenter({lat:c,lng:d}),e.setPosition({lat:c,lng:d})),google.maps.event.addListener(t,"places_changed",function(){var o=t.getPlaces();if(0!=o.length)for(var n,l=0;n=o[l];l++)e.setPosition(n.geometry.location),a.setCenter(n.geometry.location),p()})}var c,d;function p(){r.value=e.getPosition().lat(),s.value=e.getPosition().lng()}}$("#submitcreate").on("click",function(){var e=$("#create");e[0].checkValidity()||e.find(":submit").click(),$(".colorpickerback").colorpicker("enable"),$(".preloader").fadeIn(100,function(){var e=$("#create :input").filter(function(e,a){return""!=$(a).val()}).serialize();$.ajax({type:"POST",url:"include/process.php",cache:!1,data:e}).fail(function(e){$("#alert_placeholder").html('<div class="alert alert-warning alert-dismissible fade show" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><span class="error-response">'+e.statusText+"</span></div>")}).done(function(e){$("#trans-bg").prop("checked")&&$(".colorpickerback").colorpicker("disable");var a=JSON.parse(e);a.hasOwnProperty("errore")?($("#alert_placeholder").html('<div class="alert alert-warning alert-dismissible fade show" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><span class="error-response">'+a.errore+"</span></div>"),$(".resultholder img").attr("src",a.placeholder),$(".preloader").fadeOut("slow")):($("#submitcreate").attr("disabled","disabled"),d=new Date,$(".resultholder img").one("load",function(){$(this).attr("src",a.placeholder+"?t="+d.getTime()),$("#alert_placeholder").html("");var e='<a class="btn btn-default svgtopng" href="#"><i class="fa fa-download"></i> PNG</a>';e=e+'<a class="btn btn-default" href="'+a.placeholder+'" download="'+a.filename+'"><i class="fa fa-download"></i>SVG</a>',e+='<button class="btn btn-default print"><i class="fa fa-print"></i></button>',$(".linksholder").html(e),$(".print").click(function(){printIt(".resultholder")}),$(".preloader").fadeOut("slow")}).each(function(){this.complete&&$(this).trigger("load")}))})})}),$(document).ready(function(){$("#setcurrency").change(function(){var e=$(this).val();$("#getcurrency").html(e)}),$("#pp_type").change(function(){"_donations"===$(this).val()?($(".nodonation").addClass("hidden"),$(".yesdonation").removeClass("col-sm-3")):($(".nodonation").removeClass("hidden"),$(".yesdonation").addClass("col-sm-3"))}),$(".alert").alert(),$(".tooltipper").tooltip(),$(".qrcolorpicker").colorpicker({autoInputFallback:!1}).on("change",function(e){$("#submitcreate").attr("disabled",!1)}),$(document).on("change","#gradient-bg",function(){$(this).prop("checked")?$("#collapse-gradient").collapse("show"):$("#collapse-gradient").collapse("hide")}),$(document).on("change","#markers-bg",function(){$(this).prop("checked")?$("#collapse-markers-bg").collapse("show"):$("#collapse-markers-bg").collapse("hide")}),$(document).on("change","#trans-bg",function(){$(this).prop("checked")?($(".colorpickerback").colorpicker("setValue","transparent"),$(".colorpickerback").colorpicker("disable"),$("#collapse-background").collapse("hide")):($(".colorpickerback").colorpicker("enable"),$("#collapse-background").collapse("show"))}),$(document).on("input change","#create :input",function(){$("#submitcreate").attr("disabled",!1)})}),$(document).ready(function(){$("#trans-bg").prop("checked")?($(".colorpickerback").colorpicker("setValue","transparent"),$(".colorpickerback").colorpicker("disable"),$("#collapse-background").collapse("hide")):($(".colorpickerback").colorpicker("enable"),$("#collapse-background").collapse("show")),$("#markers-bg").prop("checked")?$("#collapse-markers-bg").collapse("show"):$("#collapse-markers-bg").collapse("hide"),$("#gradient-bg").prop("checked")?$("#collapse-gradient").collapse("show"):$("#collapse-gradient").collapse("hide"),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var a=$(e.target).attr("href");$("#getsec").val(a),"#location"==a&&initializeMap()})}),function(){"use strict";window.addEventListener("load",function(){var e=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(e,function(e){e.addEventListener("submit",function(a){a.preventDefault(),a.stopPropagation(),e.classList.add("was-validated")},!1)})},!1)}(),$(document).ready(function(){var e=$("input[name=btc_account]");e.on("input",function(){var a=e.val();$.ajax({method:"POST",url:"include/btc-check.php",data:{btc_account:a}}).done(function(a){a?e.removeClass("is-invalid").addClass("is-valid"):e.removeClass("is-valid").addClass("is-invalid")})})}),$(document).ready(function(){$(document).on("click",".svgtopng",function(e){var a=$(this),t=document.createElement("canvas"),o=t.getContext("2d"),n=2*document.querySelector(".resultholder img").naturalWidth;t.width=n,t.height=n;var l=document.getElementById("qrcoded");o.drawImage(l,0,0,n,n);var r=t.toDataURL(),s=$(".resultholder img").attr("src").split("/").pop().split("#")[0].split("?")[0].split(".")[0];a.attr("href",r),a.attr("download",s+".png")}),$("#upmarker").on("change",function(e){if($(this).removeClass("is-invalid"),this.files[0].type.match("image.*")){var a=this.files[0],t=new Image;t.crossOrigin="Anonymous";var o=new FileReader;o.onload=function(e){$(".logoselecta label").removeClass("active").find("input").removeAttr("checked");var a='<label class="btn btn-light p-1 active custom-watermark"><input type="radio" name="optionlogo" value="" checked><img src="'+e.target.result+'" class="user_watermark"></label>';$(".logoselecta .btn-group-toggle").append(a),t.src=$(".logoselecta .btn-group-toggle label").last().find("img").attr("src")},o.readAsDataURL(a),t.onload=function(){var e=document.createElement("canvas"),a=this.width,o=this.height;if(0==a||0==o)return $("#upmarker").addClass("is-invalid"),$(".logoselecta .btn-group-toggle label").last().remove(),!1;e.getContext("2d").drawImage(t,0,0),a>o?(o*=400/a,a=400):(a*=400/o,o=400),e.width=a,e.height=o,e.getContext("2d").drawImage(t,0,0,a,o);var n=e.toDataURL();$(".logoselecta .btn-group-toggle label").last().find("img").attr("src",n),$(".logoselecta .btn-group-toggle label").last().find("input[name='optionlogo']").val(n)}}else $(this).addClass("is-invalid")})});
